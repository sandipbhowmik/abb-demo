workloadIdentity:
  clientId: "2083f38f-820b-4293-b728-e92e90fc0024"

mode: deployment
image:
  repository: otel/opentelemetry-collector-contrib
  tag: latest

config:
  receivers:
    otlp:
      protocols:
        grpc: {}
        http: {}
  processors:
    batch: {}
  exporters:
    azuremonitor:
      instrumentation_key: "20ff652e-3ce4-4811-95cb-50bba11f8a8b"
      endpoint: "https://dc.services.visualstudio.com/v2/track"
      logs_enabled: true
      metrics_enabled: true
      traces_enabled: true
    otlp/azure:
      endpoint: "https://otlp.monitor.azure.com:4317"
      authentication:
        aad:
          managed_identity:
            client_id: "{{ .Values.workloadIdentity.clientId }}"
      sending_queue:
        enabled: true
        num_consumers: 2
        queue_size: 2000
  service:
    pipelines:
      traces:
        receivers: [otlp]
        processors: [batch]
        exporters: [azuremonitor, otlp/azure]
      metrics:
        receivers: [otlp]
        processors: [batch]
        exporters: [azuremonitor, otlp/azure]
      logs:
        receivers: [otlp]
        processors: [batch]
        exporters: [azuremonitor]